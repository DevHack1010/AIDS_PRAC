<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Population Dashboard</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; background: #121212; color: #fff; text-align: center; }
        header { padding: 15px; background: #1f1f1f; font-size: 1.8em; }
        .container { width: 95%; max-width: 1200px; margin: auto; }
        .kpi { display: flex; justify-content: space-around; flex-wrap: wrap; margin: 20px 0; }
        .kpi div { padding: 15px; background: #1f1f1f; border-radius: 8px; min-width: 150px; }
        svg { width: 100%; height: 300px; }
        .tooltip { position: absolute; padding: 5px 10px; background: #333; border-radius: 5px; color: white; font-size: 0.8em; opacity: 0; pointer-events: none; }
    </style>
</head>
<body>
<header>Population Dashboard</header>
<div class="container">
    <div class="kpi">
        <div><h3>Live Population (India)</h3><p id="livePop">Loading...</p></div>
        <div><h3>Growth Rate</h3><p>0.81%</p></div>
        <div><h3>Density</h3><p>481/kmÂ²</p></div>
        <div><h3>Median Age</h3><p>28.2 yrs</p></div>
    </div>

    <h3>Top Countries Population (Million)</h3>
    <svg id="barChart"></svg>

    <h3>India Population Growth</h3>
    <svg id="lineChart"></svg>

    <h3>Top 5 States Population (Million)</h3>
    <svg id="donutChart"></svg>
    
</div>
<div class="tooltip" id="tooltip"></div>

<script>
    // Live Population
    function startLivePopulation() {
        const base = 1441719852, rate = 0.0081;
        const baseDate = new Date('2024-01-01T00:00:00Z');
        const perSec = (base * rate) / 31536000;
        const el = document.getElementById("livePop");
        setInterval(() => {
            const seconds = (new Date() - baseDate) / 1000;
            el.textContent = Math.floor(base + seconds * perSec).toLocaleString();
        }, 1000);
    }

    // Bar Chart
    function drawBarChart() {
        const data = [{country:"India",pop:1428},{country:"China",pop:1425},{country:"USA",pop:339},{country:"Indonesia",pop:277},{country:"Pakistan",pop:240},{country:"Nigeria",pop:223}];
        const svg = d3.select("#barChart"), w = svg.node().clientWidth, h = svg.node().clientHeight;
        const x = d3.scaleBand().domain(data.map(d => d.country)).range([40, w-20]).padding(0.4);
        const y = d3.scaleLinear().domain([0, d3.max(data, d => d.pop)]).range([h-30, 20]);
        svg.append("g").attr("transform",`translate(0,${h-30})`).call(d3.axisBottom(x));
        svg.append("g").attr("transform","translate(40,0)").call(d3.axisLeft(y));
        svg.selectAll("rect").data(data).enter().append("rect")
            .attr("x", d=>x(d.country)).attr("y", d=>y(d.pop))
            .attr("width", x.bandwidth()).attr("height", d=>h-30-y(d.pop)).attr("fill","#00A8CC");
    }

    // Line Chart
    function drawLineChart() {
        const data = [{year:1960,pop:450},{year:1970,pop:555},{year:1980,pop:698},{year:1990,pop:873},{year:2000,pop:1056},{year:2010,pop:1234},{year:2020,pop:1380},{year:2023,pop:1428}];
        const svg = d3.select("#lineChart"), w = svg.node().clientWidth, h = svg.node().clientHeight;
        const x = d3.scaleLinear().domain([1960,2023]).range([40,w-20]);
        const y = d3.scaleLinear().domain([0,d3.max(data,d=>d.pop)]).range([h-30,20]);
        svg.append("g").attr("transform",`translate(0,${h-30})`).call(d3.axisBottom(x).ticks(6));
        svg.append("g").attr("transform","translate(40,0)").call(d3.axisLeft(y));
        const line = d3.line().x(d=>x(d.year)).y(d=>y(d.pop));
        svg.append("path").datum(data).attr("d",line).attr("fill","none").attr("stroke","#F94144").attr("stroke-width",2);
    }

    // Donut Chart
    function drawDonutChart() {
        const data = [{state:"UP",pop:241},{state:"Maharashtra",pop:126},{state:"Bihar",pop:125},{state:"West Bengal",pop:99},{state:"MP",pop:85}];
        const svg = d3.select("#donutChart"), w = svg.node().clientWidth, h = svg.node().clientHeight;
        const radius = Math.min(w,h)/2 - 10;
        const chart = svg.append("g").attr("transform",`translate(${w/2},${h/2})`);
        const pie = d3.pie().value(d=>d.pop);
        const arc = d3.arc().innerRadius(radius*0.6).outerRadius(radius);
        chart.selectAll("path").data(pie(data)).enter().append("path")
            .attr("d",arc).attr("fill",(d,i)=>d3.schemeSet2[i]);
    }

    startLivePopulation();
    drawBarChart();
    drawLineChart();
    drawDonutChart();
</script>
</body>
</html>